enabled: true
name: hubspot
base_url: https://api.hubapi.com
dateParser: '%Y-%m-%dT%H:%M:%S.%fZ'
paging:
  strategy: pagerToken
  pager_token_path: paging.next.after
  count_param: limit
  token_param: after
  page_size: 100
auth:
  type: HEADERS
  headers:
    Authorization: "Bearer {HUBSPOT_PRIVATE_APP_TOKEN}"
tables:
  - name: contacts
    query_resource: GET /crm/v3/objects/contacts
    result_body_path: results
    supports_paging: true
    columns:
      - name: id
        key: true
      - name: updated_at
        source: updatedAt
        type: TIMESTAMP
      - name: email
        source: properties.email
      - name: firstname
        source: properties.firstname
      - name: lastname
        source: properties.lastname
      - name: createdate
        source: properties.createdate
        type: TIMESTAMP
  - name: companies
    query_resource: GET /crm/v3/objects/companies
    result_body_path: results
    supports_paging: true
    params:
      properties: lead_media_buyer,backup_media_buyer,lead_source,tatari_business_relationship,city,ownername,owneremail,domain,name,hs_lastmodifieddate
      # Set a parameter based on a subquery
      props: \%(select string_agg(name,',') from company_properties)
    columns:
      - name: id
        key: true
        type: BIGINT
      - name: created_at
        source: createdAt
        type: TIMESTAMP
      - name: updated_at
        source: updatedAt
        type: TIMESTAMP
      - name: name
        source: properties.name
      - name: domain
        source: properties.domain
      - name: industry
        source: properties.industry
      - name: state
        source: properties.state
      - name: phone
        source: properties.phone
      - name: properties
        type: JSON
      - name: lastmodifieddate
        source: hs_lastmodifieddate
        type: TIMESTAMP
  - name: company_properties
    query_resource: GET /crm/v3/properties/company
    result_body_path: results
    supports_paging: true
    columns:
      - name: name
        key: True
      - name: type
      - name: group_name
        source: groupName
      - name: hidden
        type: BOOLEAN



